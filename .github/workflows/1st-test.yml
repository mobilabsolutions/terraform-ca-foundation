name: Test Workflow

on:
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    environment: dev
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
          
      - name: Replace tokens in .tfvars and .tf
        # You may pin to the exact commit or the version.
        # uses: cschleiden/replace-tokens@4d5a042c84c3568b3858b7af9394923d2d5195c9
        uses: qetza/replacetokens-action@v1
        id: replace-tokens
        with:
          root: ${{ github.workspace }}/germanywestcentral/dev
          sources: |
            **/*.tfvars
            **/main.tf
            **/providers.tf
            
      - run: |
          echo "defaults  : ${{ steps.replace-tokens.outputs.defaults }}"
          echo "files     : ${{ steps.replace-tokens.outputs.files }}"
          echo "replaced  : ${{ steps.replace-tokens.outputs.replaced }}"
          echo "tokens    : ${{ steps.replace-tokens.outputs.tokens }}"
          echo "transforms: ${{ steps.replace-tokens.outputs.transforms }}"
